/*
 * jQuery OpenX ad tags plugin
 *
 * Tested with OpenX Community Edition 2.8.8-rc6
 *
 * @version 1.0
 * @date Wed Jul 6 20:50:38 2011 +0400
 * @requires jQuery
 * @url http://plugins.jquery.com/project/openxtag
 *
 * @author Nikolay Morev <kolia@denivip.ru>
 * @license MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 */(function(a){var b={delivery:null,deliverySSL:null,jsTagScript:"ajs.php",charset:"UTF-8",zoneID:null,target:undefined,source:undefined,blockcampaign:undefined,block:undefined,forceAsync:!1,extra:undefined},c=function(c){b=a.extend(b,c)},d=function(c,d,e){if(typeof c=="object"||typeof c=="function")e=d,d=c,c=null;typeof d=="function"&&(e=d,d=null);var f=a.extend(b,d);c!=null&&(f.zoneID=c);return this.each(function(){var b=a(this),c=a.extend({},f);typeof a.metadata!="undefined"&&(c=a.extend(c,b.metadata())),location.protocol=="https:"?typeof c.deliverySSL!="string"&&a.error('please set "deliverySSL" option for openxtag'):typeof c.delivery!="string"&&a.error('please set "delivery" option for openxtag');var d=c.zoneID;d==null&&a.error('please set "zoneID" option for openxtag jsZone');var g=location.protocol=="https:"?c.deliverySSL+"/"+c.jsTagScript:c.delivery+"/"+c.jsTagScript,h={zoneid:d,charset:c.charset,target:c.target,source:c.source,extra:c.extra,cb:Math.floor(Math.random()*99999999999),loc:window.location.href};typeof c.block!="undefined"&&(h.block=c.block?1:0),typeof c.blockcampaign!="undefined"&&(h.blockcampaign=c.blockcampaign?1:0),document.MAX_used||(document.MAX_used=","),document.MAX_used!=","&&(h.exclude=document.MAX_used),document.referrer&&(h.referer=document.referrer),document.context&&(h.context=document.context),document.mmm_fo&&(h.mmm_fo=1),a.ajax({url:g,data:h,dataType:"html",async:c.forceAsync,success:function(a){(function(a){if(a.match(/document\.write|<script/)){var c=document.write,d="";document.write=function(a){d+=a},b.append(a),document.write=c,arguments.callee(d)}else b.append(a),typeof e=="function"&&setTimeout(e,0)})('<script type="text/javascript">'+a+"</script>")}})})},e=function(a,b,c){},f={zone:d,jsZone:d};a.fn.openxtag=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return f.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.openxtag")};var g={init:c};a.openxtag=function(b){if(g[b])return g[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return g.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.openxtag")}})(jQuery)