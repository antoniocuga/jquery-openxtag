var h=void 0,i=null;
(function(c){function m(b,f){return this.each(function(){var b=c(this),a=c.extend({},f);typeof c.metadata!="undefined"&&(a=c.extend(a,b.metadata()));q(a);var g=a.zoneID;g==i&&c.error('please set "zoneID" option for openxtag jsZone');var d=r(a);d.zoneid=g;d.cb=Math.floor(Math.random()*99999999999);document.MAX_used||(document.MAX_used=",");document.MAX_used!=","&&(d.exclude=document.MAX_used);if(document.context)d.context=document.context;document.a&&(d.mmm_fo=1);c.ajax({url:(location.protocol=="https:"?
a.deliverySSL:a.delivery)+"/"+a.jsTagScript,data:d,dataType:"html",async:a.forceAsync,success:function(a){n('<script type="text/javascript">'+a+"<\/script>",b)}})})}function n(b,f){var e=0;(function(a){if(a.match(/document\.write|<script/)){var b=document.write,d="";document.write=function(a){d+=a};f.append(a);document.write=b;e++;e>o&&c.error("openxtag: document.write loop stopped after "+o+" iterations");arguments.callee(d)}else f.append(a),typeof success=="function"&&setTimeout(success,0)})(b)}
function u(b,f,e,a){if(typeof f=="object"||typeof f=="function")a=e,e=f,f=i;typeof e=="function"&&(a=e,e=i);e=c.extend(j,e);f!=i&&(e.zoneID=f);return b.apply(this,[f,e,a])}function q(b){location.protocol=="https:"?typeof b.deliverySSL!="string"&&c.error('please set "deliverySSL" option for openxtag'):typeof b.delivery!="string"&&c.error('please set "delivery" option for openxtag')}function r(b){var c={charset:b.charset,target:b.target,source:b.source,extra:b.extra,loc:window.location.href};typeof b.block!=
"undefined"&&(c.block=b.block?1:0);typeof b.blockcampaign!="undefined"&&(c.blockcampaign=b.blockcampaign?1:0);if(document.referrer)c.referer=document.referrer;for(var e in c)typeof c[e]=="undefined"&&delete c[e];return c}var o=10,j={jsPrefix:"OA_",swfObjectJS:"fl.js",delivery:i,deliverySSL:i,jsTagScript:"ajs.php",spcTagScript:"spc.php",iframeTagScript:"afr.php",adViewScript:"avw.php",clickScript:"ck.php",charset:"UTF-8",zoneID:i,target:h,source:h,blockcampaign:h,block:h,forceAsync:!1,refresh:h,resize:h,
allowtransparent:h,width:h,height:h,extra:h},t={zone:m,jsZone:m,spc:function(b,f){var e={},a=0,g=this.each(function(){var b=c(this),d=c.extend({},f);typeof c.metadata!="undefined"&&(d=c.extend(d,b.metadata()));d=d.zoneID;d==i&&c.error('please set "zoneID" option for openxtag jsZone');var g="z"+a;e[g]=d;b.data("openxtag",{zn:g});a++}),d=c.extend({},f);q(d);var k=r(d);k.zones=Object.keys(e).map(function(a){return a+"="+e[a]}).join("|");k.nz=1;k.r=Math.floor(Math.random()*99999999999);var j=this;c.ajax({url:(location.protocol==
"https:"?d.deliverySSL:d.delivery)+"/"+d.spcTagScript,data:k,dataType:"html",async:d.forceAsync,success:function(a){c.getScript((location.protocol=="https:"?d.deliverySSL:d.delivery)+"/"+d.swfObjectJS,function(){var b=eval("(function () {"+a+";return "+d.jsPrefix+"output;})()");j.each(function(){var a=c(this);n(b[a.data("openxtag").zn],a)})})}});return g},iframe:function(b,f){return this.each(function(){var b=c(this),a=c.extend({},f);typeof c.metadata!="undefined"&&(a=c.extend(a,b.metadata()));q(a);
var g=a.zoneID;g==i&&c.error('please set "zoneID" option for openxtag iframe');var d=r(a);d.zoneid=g;d.cb=Math.floor(Math.random()*99999999999);typeof a.refresh!="undefined"&&(d.refresh=a.refresh);typeof a.resize!="undefined"&&(d.resize=a.resize?1:0);typeof a.width=="undefined"&&c.error("openxtag: width parameter is required for iframe tag");var k=a.width;typeof a.height=="undefined"&&c.error("openxtag: height parameter is required for iframe tag");var j=a.height,l="";typeof a.allowtransparent!="allowtransparent"&&
a.allowtransparent&&(l=' allowtransparency="true" ');var p="a"+Math.floor(Math.random()*999999),m=typeof a.target=="undefined"?"_blank":a.target,s=location.protocol=="https:"?a.deliverySSL:a.delivery,n=s+"/"+a.clickScript,o=s+"/"+a.adViewScript;b.append("<iframe id='"+p+"' name='"+p+"' src='"+(s+"/"+a.iframeTagScript)+"?"+c.param(d)+"' frameborder='0' scrolling='no' width='"+k+"' height='"+j+"'"+l+"><a href='"+n+"?n="+p+"&amp;cb="+d.cb+"' target='"+m+"'><img src='"+o+"?zoneid="+g+"&amp;cb="+d.cb+
"&amp;n="+p+"' border='0' alt='' /></a></iframe>")})}};c.fn.extend({openxtag:function(b){if(t[b])return u.apply(this,[t[b]].concat(Array.prototype.slice.call(arguments,1)));else c.error("Method "+b+" does not exist on jQuery.openxtag")}});var l={init:function(b){j=c.extend(j,b)}};c.extend({openxtag:function(b){if(l[b])return l[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return l.init.apply(this,arguments);else c.error("Method "+b+" does not exist on jQuery.openxtag")}})})(jQuery);
